<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>

        <meta charset="utf-8">

        <title>Data</title> 

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">


        <!-- styles for this little demo page -->
        <style type="text/css">

            body{
                background-color: #f5f5f5;
                margin: 0;
                padding: 0;
                font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
            }

            .page {
                margin: 40px;
            }

            h1{
                margin: 40px 0 60px 0;
            }

            .dark-area {
                background-color: #666;
                padding: 40px;
                margin: 0 -40px 20px -40px;
                clear: both;
            }

            .clearfix:before,.clearfix:after {content: " "; display: table;}
            .clearfix:after {clear: both;}
            .clearfix {*zoom: 1;}

        </style>

        <link rel="stylesheet" href="css/circle.css">

    </head>

    <body>

        <p id="last_updated"></p>
        <p id="curr_temp"></p>
        <p id="curr_hum"></p>
        <p id="curr_soil_temp"></p>
        <p id="curr_soil_moisture"></p>
        <p id="curr_water_temp"></p>

        <script>


            function getData() {

                var xmlhttp = new XMLHttpRequest();

                xmlhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        myObj = JSON.parse(this.responseText);
                        document.getElementById("last_updated").innerHTML = myObj.last_updated;
                        document.getElementById("curr_temp").innerHTML = myObj.curr_temp;
                        document.getElementById("curr_hum").innerHTML = myObj.curr_hum;
                        document.getElementById("curr_soil_temp").innerHTML = myObj.curr_soil_temp;
                        document.getElementById("curr_soil_moisture").innerHTML = myObj.curr_soil_moisture;
                        document.getElementById("curr_water_temp").innerHTML = myObj.curr_water_temp;
                    }
                };
                xmlhttp.open("GET", "server.php", true);
                xmlhttp.send();
                console.log("Updated ");
                setTimeout(getData, 60000);

            }

            getData();

        </script>

       

    </body>
</html>